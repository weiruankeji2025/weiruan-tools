/*! coi-serviceworker v0.1.7 - Guido Zuidhof, licensed under MIT */
let co=Object.entries(window.coi||{}).reduce((e,[o,i])=>o.startsWith("co")?{...e,[o]:i}:e,{}),n=navigator;if(n.serviceWorker&&n.serviceWorker.controller){n.serviceWorker.controller.postMessage({type:"coi-cs"})}else if(window.isSecureContext){!function(){let e=window.document.currentScript,o=e.src,i=o.substr(0,o.lastIndexOf("/")+1),t=e.getAttribute("src"),r=new URL(t,window.location.origin).pathname,s=t.substr(t.lastIndexOf("/")+1),c=window.document.createElement("script");c.src=i+s,window.document.head.appendChild(c),n.serviceWorker.register(i+s).then(e=>{console.log("COI Service Worker registered",e),e.addEventListener("updatefound",()=>{window.location.reload()}),e.active&&!n.serviceWorker.controller&&window.location.reload()},e=>{console.error("COI Service Worker failed",e)})}()}else{console.warn("COI Service Worker requires a secure context (HTTPS or localhost)")}self.addEventListener("install",()=>self.skipWaiting()),self.addEventListener("activate",e=>e.waitUntil(self.clients.claim())),self.addEventListener("message",e=>{e.data&&"coi-cs"===e.data.type&&("undefined"==typeofSharedArrayBuffer?console.error("COI: SharedArrayBuffer is not defined, please use a newer browser."):console.log("COI: Setup complete"))}),self.addEventListener("fetch",function(e){const{request:o}=e;if("cache"===o.cache&&"no-cache"!==o.mode)return;if("only-if-cached"===o.mode)return;if(e.request.destination==="document"){e.respondWith(fetch(o).then(e=>{const o=new Headers(e.headers);return o.set("Cross-Origin-Embedder-Policy","require-corp"),o.set("Cross-Origin-Opener-Policy","same-origin"),new Response(e.body,{status:e.status,statusText:e.statusText,headers:o})}))}else if(e.request.destination==="script"||e.request.destination==="worker"){e.respondWith(fetch(o).then(e=>{const o=new Headers(e.headers);return o.set("Cross-Origin-Embedder-Policy","require-corp"),new Response(e.body,{status:e.status,statusText:e.statusText,headers:o})}))}});